{{#each flashMessages.queue as |flash|}}
  {{#notification flash=flash}}
    {{flash.message}}
  {{/notification}}
{{/each}}

{{#if busy}}
  <div class="feed-layout__loading">
    <span class="fa-2x">
      <i class="fal fa-spinner fa-spin"></i>
    </span>
  </div>
{{/if}}

<div class="feed-layout__filters">
  <Layouts::FeedFilters @ordersCounts={{ordersCountsByStatus}} />
</div>

<div class="feed-layout__controls">
  <div class="columns is-marginless is-mobile">
    <div class="column is-2 is-padingless has-text-centered">
      <button class="button is-dark is-outlined" {{action "scrollToTop"}}>
        <span class="icon is-small">
          <i class="far fa-angle-up" aria-hidden="true"></i>
        </span>
        <span>Nahoru</span>
      </button>
    </div>

    <div class="column is-8 is-padingless">
      <SearchBox @searchTerm={{searchTerm}} @onChange={{action (mut searchTerm)}} />
    </div>

    <div class="column is-2 is-padingless has-text-right">
      {{#if kitchenState.isOpen}}
        <button class="button {{if openCloseShop.isRunning "is-loading"}} is-danger" onclick={{perform openCloseShop false}} disabled={{openCloseShop.isRunning}}>Zavřít</button>
      {{else}}
        <button class="button {{if openCloseShop.isRunning "is-loading"}} is-success" onclick={{perform openCloseShop true}} disabled={{openCloseShop.isRunning}}>Otevřit</button>
      {{/if}}
    </div>
  </div>
</div>

<div class="feed-layout__items js-scrollable-feed">
  <div id="scrollToHere"></div>

  {{#each ordersByTimeSlot as |slot|}}
    <Layouts::FeedTimeSlot @slot={{slot.title}} @orders={{slot.orders}} />
  {{/each}}

  {{#if noOrdersToShow}}
    <article class="message">
      <div class="message-header">
        <p>Žádné objednávky {{if searchTerm (concat "nenalezeny pro " searchTerm) "v tomhle stavu"}}.</p>
      </div>
      <div class="message-body">
        {{#if searchTerm}}
          Zkus hledat jinak.
        {{else}}
          Přepni filtr nahoře.
        {{/if}}
      </div>
    </article>
  {{/if}}
</div>